{"version":3,"file":"Load.js","sources":["pages/Load/Load.vue","D:/ -- HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvTG9hZC9Mb2FkLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"login-container\">\n    <image class=\"logo\" src=\"/static/logo.png\"></image>\n    <view class=\"form\">\n      <view class=\"input-item\">\n        <text class=\"label\">账号：</text>\n        <input \n          type=\"text\" \n          v-model=\"account\" \n          placeholder=\"请输入账号\" \n          class=\"input\"\n        />\n      </view>\n      <view class=\"input-item\">\n        <text class=\"label\">密码：</text>\n        <input \n          type=\"password\" \n          v-model=\"password\" \n          placeholder=\"请输入密码\" \n          class=\"input\"\n        />\n      </view>\n      <button class=\"login-btn\" @click=\"handleLogin\">登录</button>\n      <view class=\"register-link\" @click=\"gotoRegister\">还没有账号？去注册</view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      account: '',\n      password: ''\n    };\n  },\n  methods: {\r\n\t  gotoRegister(){\r\n\t  \tuni.navigateTo({\r\n\t  \t  url: `/pages/register/register`\r\n\t  \t});\r\n\t  },\n    handleLogin() {\n      // 表单校验\n      if (!this.account || !this.password) {\n        uni.showToast({\n          title: '账号和密码不能为空',\n          icon: 'none'\n        });\n        return;\n      }\n      // 发送登录请求\n      uni.request({\n        url: 'http://127.0.0.1:8080/user/login',\n        method: 'POST',\n        data: { account: this.account, password: this.password },\n        header: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        withCredentials: true, // 允许携带凭证\n        success: (res) => {\n          const setCookie = res.header['set-cookie'] || res.header['Set-Cookie'];\n          \n          if (setCookie) {\n            const cookies = Array.isArray(setCookie) \n              ? setCookie.join('; ') \n              : setCookie;\n            uni.setStorageSync('cookies', cookies);\n            console.log('获取Cookie:', cookies);\n          }\n          if (res.data.code === 0) {\n            uni.showToast({\n              title: '登录成功',\n              icon: 'success'\n            });\n            setTimeout(() => {\n              uni.switchTab({ \n                url: '/pages/index/index'\n              });\n            }, 500);\n          } else {\n            uni.showToast({\n              title: res.data.message,\n              icon: 'none'\n            });\n          }\n        },\n        fail: (err) => {\n          console.error('登录请求失败:', err);\n          uni.showToast({\n            title: '网络请求失败',\n            icon: 'none'\n          });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.login-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 100rpx;\n  background-color: #fff;\n  min-height: 100vh;\n}\n.logo {\n  width: 200rpx;\n  height: 200rpx;\n  margin-bottom: 50rpx;\n}\n.form {\n  width: 80%;\n}\n.input-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 30rpx;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 10rpx;\n}\n.label {\n  width: 120rpx;\n  font-size: 32rpx;\n}\n.input {\n  flex: 1;\n  font-size: 28rpx;\n}\n.login-btn {\n  width: 100%;\n  height: 80rpx;\n  line-height: 80rpx;\n  text-align: center;\n  background-color: #E5484D;\n  color: #fff;\n  font-size: 32rpx;\n  border-radius: 10rpx;\n  margin-top: 50rpx;\n}\n.register-link {\n  text-align: center;\n  margin-top: 30rpx;\n  color: #007aff;\n  font-size: 28rpx;\n}\n</style>","import MiniProgramPage from 'F:/uni-app/Newocg/ocg/pages/Load/Load.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AA6BA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA;EAEb;AAAA,EACD,SAAS;AAAA,IACR,eAAc;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACP,CAAC;AAAA,IACD;AAAA,IACA,cAAc;AAEZ,UAAI,CAAC,KAAK,WAAW,CAAC,KAAK,UAAU;AACnCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD;AAAA,MACF;AAEAA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM,EAAE,SAAS,KAAK,SAAS,UAAU,KAAK,SAAU;AAAA,QACxD,QAAQ;AAAA,UACN,gBAAgB;AAAA,QACjB;AAAA,QACD,iBAAiB;AAAA;AAAA,QACjB,SAAS,CAAC,QAAQ;AAChB,gBAAM,YAAY,IAAI,OAAO,YAAY,KAAK,IAAI,OAAO,YAAY;AAErE,cAAI,WAAW;AACb,kBAAM,UAAU,MAAM,QAAQ,SAAS,IACnC,UAAU,KAAK,IAAI,IACnB;AACJA,0BAAAA,MAAI,eAAe,WAAW,OAAO;AACrCA,0BAAY,MAAA,MAAA,OAAA,6BAAA,aAAa,OAAO;AAAA,UAClC;AACA,cAAI,IAAI,KAAK,SAAS,GAAG;AACvBA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YACR,CAAC;AACD,uBAAW,MAAM;AACfA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,KAAK;AAAA,cACP,CAAC;AAAA,YACF,GAAE,GAAG;AAAA,iBACD;AACLA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,IAAI,KAAK;AAAA,cAChB,MAAM;AAAA,YACR,CAAC;AAAA,UACH;AAAA,QACD;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAA,MAAA,MAAA,SAAA,6BAAc,WAAW,GAAG;AAC5BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;AChGA,GAAG,WAAW,eAAe;"}