{"version":3,"file":"Report.js","sources":["pages/Report/Report.vue","D:/ -- HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvUmVwb3J0L1JlcG9ydC52dWU"],"sourcesContent":["<template>\n  <view class=\"report-container\">\n    <view class=\"header\">\n      <text class=\"title\">举报用户</text>\n    </view>\n    \n    <view class=\"form-container\">\n      <!-- 被举报用户ID输入 -->\n      <view class=\"form-item\">\n        <text class=\"label\">被举报用户ID</text>\n        <input \n          class=\"input\" \n          type=\"text\" \n          v-model=\"reportForm.reportedUserId\" \n          placeholder=\"请输入要举报的用户ID\"\n          placeholder-class=\"placeholder\"\n        />\n      </view>\n      \n      <!-- 举报类型选择 -->\n      <view class=\"form-item\">\n        <text class=\"label\">举报类型</text>\n        <picker \n          mode=\"selector\" \n          :range=\"reportTypes\" \n          @change=\"handleTypeChange\"\n        >\n          <view class=\"picker\">\n            {{ reportForm.type || '请选择举报类型' }}\n          </view>\n        </picker>\n      </view>\n      \n      <!-- 举报详情 -->\n      <view class=\"form-item\">\n        <text class=\"label\">举报详情</text>\n        <textarea \n          class=\"textarea\" \n          v-model=\"reportForm.content\" \n          placeholder=\"请详细描述举报原因(至少5个字)\"\n          placeholder-class=\"placeholder\"\n          maxlength=\"500\"\n        ></textarea>\n        <text class=\"word-count\">{{ reportForm.content.length }}/500</text>\n      </view>\n      \n      <!-- 提交按钮 -->\n      <button \n        class=\"submit-btn\" \n        :disabled=\"!canSubmit\" \n        @click=\"submitReport\"\n      >\n        提交举报\n      </button>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      reportForm: {\n        reportedUserId: '',\n        type: '',\n        content: ''\n      },\n      reportTypes: [\n        '不当言论',\n        '欺诈行为',\n        '骚扰他人',\n        '虚假信息',\n        '其他违规'\n      ],\n    }\n  },\n  computed: {\n    canSubmit() {\n      return (\n        this.reportForm.reportedUserId &&\n        this.reportForm.type &&\n        this.reportForm.content.length >= 5\n      )\n    }\n  },\n  methods: {\n    handleTypeChange(e) {\n      this.reportForm.type = this.reportTypes[e.detail.value]\n    },\n    \n    submitReport() {\n      if (!this.canSubmit) return\n      const cookies = uni.getStorageSync('cookies')\n      uni.request({\n        url: 'http://127.0.0.1:8080/banned/send',\n        method: 'POST',\n        data: {\n          banUser: this.reportForm.reportedUserId,\n        },\n        header: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Cookie': cookies \n        },\n        success: (res) => {\n          if (res.data.code === 0) {\n            uni.showToast({ title: '举报成功', icon: 'success' })\n            setTimeout(() => {\n              uni.navigateBack()\n            }, 500)\n          } else {\n            uni.showToast({\n              title: res.data.message || '举报失败',\n              icon: 'none'\n            })\n          }\n        },\n        fail: (err) => {\n          uni.showToast({\n            title: '网络错误，请稍后重试',\n            icon: 'none'\n          })\n          console.error('举报提交失败:', err)\n        },\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.report-container {\n  padding: 30rpx;\n  background-color: #F5F5F5;\n  min-height: 100vh;\n}\n\n.header {\n  margin-bottom: 30rpx;\n  .title {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #333;\n  }\n}\n\n.form-container {\n  background-color: #fff;\n  border-radius: 12rpx;\n  padding: 30rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);\n}\n\n.form-item {\n  margin-bottom: 30rpx;\n  .label {\n    display: block;\n    font-size: 28rpx;\n    color: #333;\n    margin-bottom: 15rpx;\n    font-weight: 500;\n  }\n}\n\n.input, .picker {\n  width: 94%;\n  height: 70rpx;\n  line-height: 70rpx;\n  padding: 0 20rpx;\n  border: 1rpx solid #E5E5E5;\n  border-radius: 8rpx;\n  font-size: 28rpx;\n  background-color: #fff;\n}\n\n.picker {\n  color: #999;\n}\n\n.textarea {\n  width: 94%;\n  height: 180rpx;\n  padding: 20rpx;\n  border: 1rpx solid #E5E5E5;\n  border-radius: 8rpx;\n  font-size: 28rpx;\n  background-color: #fff;\n}\n\n.word-count {\n  display: block;\n  text-align: right;\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 10rpx;\n}\n\n.submit-btn {\n  margin-top: 40rpx;\n  background-color: #E5484D;\n  color: #fff;\n  border: none;\n  border-radius: 45rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n  font-size: 30rpx;\n  \n  &[disabled] {\n    background-color: #F2CDCD;\n    color: #fff;\n  }\n}\n\n.placeholder {\n  color: #999;\n  font-size: 28rpx;\n}\n</style>","import MiniProgramPage from 'F:/uni-app/Newocg/ocg/pages/Report/Report.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA2DA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,YAAY;AAAA,QACV,gBAAgB;AAAA,QAChB,MAAM;AAAA,QACN,SAAS;AAAA,MACV;AAAA,MACD,aAAa;AAAA,QACX;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD;AAAA,IACH;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,YAAY;AACV,aACE,KAAK,WAAW,kBAChB,KAAK,WAAW,QAChB,KAAK,WAAW,QAAQ,UAAU;AAAA,IAEtC;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,iBAAiB,GAAG;AAClB,WAAK,WAAW,OAAO,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,IACvD;AAAA,IAED,eAAe;AACb,UAAI,CAAC,KAAK;AAAW;AACrB,YAAM,UAAUA,cAAAA,MAAI,eAAe,SAAS;AAC5CA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,UACJ,SAAS,KAAK,WAAW;AAAA,QAC1B;AAAA,QACD,QAAQ;AAAA,UACN,gBAAgB;AAAA,UAChB,UAAU;AAAA,QACX;AAAA,QACD,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,KAAK,SAAS,GAAG;AACvBA,0BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,WAAW;AAChD,uBAAW,MAAM;AACfA,4BAAAA,MAAI,aAAa;AAAA,YAClB,GAAE,GAAG;AAAA,iBACD;AACLA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,IAAI,KAAK,WAAW;AAAA,cAC3B,MAAM;AAAA,aACP;AAAA,UACH;AAAA,QACD;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,WACP;AACDA,wBAAAA,MAAA,MAAA,SAAA,kCAAc,WAAW,GAAG;AAAA,QAC7B;AAAA,OACF;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;AC7HA,GAAG,WAAW,eAAe;"}