{"version":3,"file":"Search.js","sources":["pages/Search/Search.vue","D:/ -- HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvU2VhcmNoL1NlYXJjaC52dWU"],"sourcesContent":["<template>\n  <view class=\"search-box\">\n    <input \n      type=\"text\" \n      v-model=\"searchText\"\n      placeholder=\"搜索卡片\" \n      class=\"search-input\"\n      @confirm=\"doSearch\"\n      confirm-type=\"search\"\n    />\n  </view>\n  <view class=\"BigTitle\">\n    {{ isFromCollect === 1 ? '我的收藏' : '搜索结果' }}\n  </view>\n  <view class=\"content\">\n    <!-- 搜索结果提示 -->\n    <view class=\"search-info\" v-if=\"searchText\">\n      关键词「{{searchText}}」的{{ isFromCollect === 1 ? '收藏' : '搜索结果' }}\n    </view>\n    <!-- 循环渲染商品卡片 -->\n    <view class=\"goods-list\">\n      <GoodsCard \n        v-for=\"(item, index) in filteredGoods\"    \n        :key=\"index\" \n        :goods=\"item\"\n      />\n    </view>\n    <!-- 无结果提示 -->\n    <view class=\"no-result\" v-if=\"filteredGoods.length === 0\">\n      {{ isFromCollect === 1 ? '您的收藏中没有符合条件的卡片' : '没有找到符合条件的卡片' }}\n    </view>\n  </view>\n</template>\n\n<script>\n// 引入商品卡片组件\nimport GoodsCard from \"@/pages/index/GoodsCard.vue\";\n\nexport default {\n  components: {\n    GoodsCard\n  },\n  data() {\n    return {\n      searchText: '', // 搜索文本\n      isFromCollect: 0, // 是否来自收藏页面，默认为0（全部卡片）\n      // 所有卡片列表\n      allGoodsList: [],\n      // 收藏卡片列表\n      collectedGoodsList: []\n    };\n  },\n  computed: {\n    // 根据isFromCollect参数选择显示的商品列表\n    goodsList() {\n      return this.isFromCollect === 1 ? this.collectedGoodsList : this.allGoodsList;\n    },\n    // 根据搜索关键词过滤商品列表\n    filteredGoods() {\n      if (!this.searchText) return this.goodsList;\n      \n      const keyword = this.searchText.toLowerCase();\n      return this.goodsList.filter(item => {\n        return item.name.toLowerCase().includes(keyword) || \n               item.cardNumber.toLowerCase().includes(keyword);\n      });\n    }\n  },\n  methods: {\n    // 执行搜索\n    doSearch() {\n      console.log('执行搜索:', this.searchText, '是否来自收藏:', this.isFromCollect);\n    },\r\n\t// 调用后端接口获取热门卡片数据\r\n\tgetAllCards() {\r\n\t  console.log(\"getAllCards\")\r\n\t  uni.request({\r\n\t    url: 'http://127.0.0.1:8080/cards/get', \r\n\t    method: 'GET',\r\n\t    success: (res) => {\r\n\t      if (res.data.code === 0) {\r\n\t        this.allGoodsList = res.data.data;\r\n\t      } else {\r\n\t        uni.showToast({\r\n\t          title: '获取数据失败',\r\n\t          icon: 'none'\r\n\t        });\r\n\t      }\r\n\t    },\r\n\t    fail: (err) => {\r\n\t      console.error('请求失败:', err);\r\n\t      uni.showToast({\r\n\t        title: '网络请求失败',\r\n\t        icon: 'none'\r\n\t      });\r\n\t    }\r\n\t  });\r\n\t},\r\n\tgetCollectedCards(){\r\n\t\tconsole.log(\"getCollectedCards\")\r\n\t\tconst cookies = uni.getStorageSync('cookies');\r\n\t\tuni.request({\r\n\t\t  url: 'http://127.0.0.1:8080/userFavorite/get', \r\n\t\t  method: 'POST',\r\n\t\t  header: {\r\n\t\t      'Content-Type': 'application/x-www-form-urlencoded',\r\n\t\t      'Cookie':  cookies\r\n\t\t    },\r\n\t\t  success: (res) => {\r\n\t\t    if (res.data.code === 0) {\r\n\t\t      this.collectedGoodsList = res.data.data;\r\n\t\t    } else {\r\n\t\t      uni.showToast({\r\n\t\t        title: '获取数据失败',\r\n\t\t        icon: 'none'\r\n\t\t      });\r\n\t\t    }\r\n\t\t  },\r\n\t\t  fail: (err) => {\r\n\t\t    console.error('请求失败:', err);\r\n\t\t    uni.showToast({\r\n\t\t      title: '网络请求失败',\r\n\t\t      icon: 'none'\r\n\t\t    });\r\n\t\t  }\r\n\t\t});\r\n\t}\n  },\n  onLoad(options) {\n    // 获取URL参数\r\n\tthis.getAllCards();\r\n\tthis.getCollectedCards();\n    if (options.keyword) {\n      this.searchText = decodeURIComponent(options.keyword);\n    }\n    \n    // 获取是否来自收藏的参数\n    if (options.isFromCollect !== undefined) {\n      this.isFromCollect = parseInt(options.isFromCollect);\n    }\n    \n    console.log('加载搜索页面:', {\n      关键词: this.searchText,\n      来自收藏: this.isFromCollect === 1 ? '是' : '否'\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.search-box {\n  padding: 20rpx 30rpx;\n  background-color: #ffffff;\n}\n\n.search-input {\n  width: 100%;\n  height: 70rpx;\n  background-color: #f5f5f5;\n  border-radius: 35rpx;\n  padding: 0 30rpx;\n  font-size: 28rpx;\n  color: #333;\n}\n\n.content {\n  padding: 16rpx;\n  background-color: #f5f5f5;\n  min-height: 80vh;\n}\n\n.BigTitle{\n  font-size: 60rpx;\n  font-weight: bold;\n  color: #333;\n  margin-left: 10px;\n  text-align: left;\n  line-height: 64rpx;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.search-info {\n  padding: 20rpx;\n  font-size: 28rpx;\n  color: #666;\n  background-color: #fff;\n  margin-bottom: 10rpx;\n  border-radius: 8rpx;\n}\n\n.goods-list {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n}\n\n.no-result {\n  width: 100%;\n  padding: 60rpx 0;\n  text-align: center;\n  color: #999;\n  font-size: 28rpx;\n}\n</style>","import MiniProgramPage from 'F:/uni-app/Newocg/ocg/pages/Search/Search.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}