{"version":3,"file":"personal.js","sources":["pages/personal/personal.vue","D:/ -- HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGVyc29uYWwvcGVyc29uYWwudnVl"],"sourcesContent":["<template>\n  <view class=\"personal-container\">\n    <!-- 用户信息区域 -->\n    <view class=\"user-info-section\">\n      <view class=\"user-detail\">\n        <view class=\"user-stats\">\n          <view class=\"stat-item\" @click=\"navigateTo('myPublish')\">\n            <text class=\"stat-value\">{{publishingCount}}</text>\n            <text class=\"stat-label\">出售中</text>\n          </view>\n          <view class=\"stat-item\" @click=\"navigateTo('myCollection')\">\n            <text class=\"stat-value\">{{collectionCount}}</text>\n            <text class=\"stat-label\">收藏</text>\n          </view>\n          <view class=\"stat-item\" @click=\"navigateTo('messageCenter')\">\n            <text class=\"stat-value\">{{messageCount}}</text>\n            <text class=\"stat-label\">消息</text>\n            <view class=\"mini-badge\" v-if=\"messageCount > 99\"></view>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 主要功能区 -->\n    <view class=\"main-functions\">\n      <view class=\"function-card\" @click=\"navigateTo('myPublish')\">\n        <view class=\"function-header\">\n          <text class=\"function-icon\">📋</text>\n          <text class=\"function-title\">我的发布</text>\n        </view>\n        <text class=\"function-desc\">管理您正在出售的卡牌</text>\n        <view class=\"function-footer\">\n          <text>查看全部</text>\n          <text>›</text>\n        </view>\n      </view>\n      \n      <view class=\"function-card\" @click=\"navigateTo('myCollection')\">\n        <view class=\"function-header\">\n          <text class=\"function-icon\">⭐</text>\n          <text class=\"function-title\">我的收藏</text>\n        </view>\n        <text class=\"function-desc\">查看您收藏的卡牌</text>\n        <view class=\"function-footer\">\n          <text>查看全部</text>\n          <text>›</text>\n        </view>\n      </view>\n      \n      <view class=\"function-card\" @click=\"navigateTo('publishCard')\">\n        <view class=\"function-header\">\n          <text class=\"function-icon\">➕</text>\n          <text class=\"function-title\">发布卡牌</text>\n        </view>\n        <text class=\"function-desc\">出售您的闲置卡牌</text>\n        <view class=\"function-footer\">\n          <text>立即发布</text>\n          <text>›</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 设置区域 -->\n    <view class=\"settings-section\">\n      <view class=\"section-title\">账户设置</view>\n      <view class=\"setting-item\" @click=\"navigateTo('accountSettings')\">\n        <text class=\"setting-icon\">👤</text>\n        <text class=\"setting-text\">个人资料</text>\n        <text class=\"setting-arrow\">›</text>\n      </view>\n      <view class=\"setting-item\" @click=\"navigateTo('securityCenter')\">\n        <text class=\"setting-icon\">⚠️</text>\n        <text class=\"setting-text\">举报与反馈</text>\n        <text class=\"setting-arrow\">›</text>\n      </view>\n      \n      <view class=\"section-title\">其他</view>\n      <view class=\"setting-item\" @click=\"navigateTo('feedback')\">\n        <text class=\"setting-icon\">❓</text>\n        <text class=\"setting-text\">帮助中心</text>\n        <text class=\"setting-arrow\">›</text>\n      </view>\n      <view class=\"setting-item\" @click=\"navigateTo('aboutUs')\">\n        <text class=\"setting-icon\">ℹ️</text>\n        <text class=\"setting-text\">关于我们</text>\n        <text class=\"setting-arrow\">›</text>\n      </view>\n      \n      <button class=\"logout-btn\" @click=\"logout\">退出登录</button>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      publishingCount: 0,\n      messageCount: 0,\n      collectionCount: 0,\n    }\n  },\n  onShow() {\r\n\t  this.getAllCollectCards()\n    this.loadUserCards()\n    this.loadMessageCount()\n  },\n  methods: {\r\n\t  getAllCollectCards() {\r\n\t  \t \tconst cookies = uni.getStorageSync('cookies');\r\n\t  \t   uni.request({\r\n\t  \t     url: 'http://127.0.0.1:8080/userFavorite/get', \r\n\t  \t     method: 'POST',\r\n\t  \t \t  header: {\r\n\t  \t \t      'Content-Type': 'application/x-www-form-urlencoded',\r\n\t  \t \t      'Cookie':  cookies\r\n\t  \t \t    },\r\n\t  \t     success: (res) => {\r\n\t  \t       if (res.data.code === 0) {\r\n\t  \t         this.collectionCount = res.data.data.length;\r\n\t  \t       } else {\r\n\t  \t \t\t\tconsole.log(res.data.code);\r\n\t  \t         uni.showToast({\r\n\t  \t           title: '获取数据失败',\r\n\t  \t           icon: 'none'\r\n\t  \t         });\r\n\t  \t       }\r\n\t  \t     },\r\n\t  \t     fail: (err) => {\r\n\t  \t       console.error('请求失败:', err);\r\n\t  \t       uni.showToast({\r\n\t  \t         title: '网络请求失败',\r\n\t  \t         icon: 'none'\r\n\t  \t       });\r\n\t  \t     }\r\n\t  \t   });\r\n\t  \t },\n    async loadUserCards() {\n      try {\n        const res = await new Promise((resolve, reject) => {\n          uni.request({\n            url: 'http://127.0.0.1:8080/cards/get/own',\n            method: 'GET',\n            header: {\n              'Content-Type': 'application/x-www-form-urlencoded',\n              'Cookie': uni.getStorageSync('cookies')\n            },\n            success: (res) => {\n              if (res.statusCode === 200) {\n                resolve(res)\n              } else {\n                reject(new Error(`请求失败，状态码: ${res.statusCode}`))\n              }\n            },\n            fail: (err) => {\n              reject(err)\n            }\n          })\n        })\n\n        const responseData = res.data || {}\n        \n        if (responseData.code === 0) {\n          this.publishingCount = Array.isArray(responseData.data) ? \n            responseData.data.filter(card => card.status === 1).length : 0\n        }\n      } catch (error) {\n        console.error('加载卡牌数据失败:', error)\n      }\n    },\n//卡牌计数\n    async loadMessageCount() {\n      try {\n        const res = await new Promise((resolve, reject) => {\n          uni.request({\n            url: 'http://127.0.0.1:8080/post/get',\n            method: 'GET',\n            header: {\n              'Cookie': uni.getStorageSync('cookies')\n            },\n            success: (res) => {\n              if (res.statusCode === 200) {\n                resolve(res)\n              } else {\n                reject(new Error(`请求失败，状态码: ${res.statusCode}`))\n              }\n            },\n            fail: (err) => {\n              reject(err)\n            }\n          })\n        })\n\n        const responseData = res.data || {}\n        if (responseData.code === 0) {\n          this.messageCount = Array.isArray(responseData.data) ? responseData.data.length : 0\n        }\n      } catch (error) {\n        console.error('获取消息数失败:', error)\n      }\n    },\n    \n    navigateTo(page) {\n      const routes = {\n        'myPublish': '/pages/card/myPublish',\n        'publishCard': '/pages/card/publish',\n        'myCollection': '/pages/CollectedGoodsCard/CollectedGoodsCard',\n        'messageCenter': '/pages/message/myMessage',\n        'accountSettings': '/pages/settings/account',\n        'securityCenter': '/pages/Report/Report',\n        'feedback': '/pages/settings/feedback',\n        'aboutUs': '/pages/settings/about'\n      }\n      uni.navigateTo({\n        url: routes[page]\n      })\n    },\n    \n    logout() {\n      uni.removeStorageSync('token')\n      uni.removeStorageSync('cookies')\n      uni.reLaunch({\n        url: '/pages/Load/Load'\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n.personal-container {\n  padding: 20rpx;\n  background-color: #f5f5f5;\n  min-height: 100vh;\n}\n\n.user-info-section {\n  display: flex;\n  justify-content: center;\n  padding: 30rpx;\n  background-color: #fff;\n  border-radius: 16rpx;\n  margin-bottom: 20rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n}\n\n.user-detail {\n  width: 100%;\n}\n\n.username {\n  font-size: 36rpx;\n  font-weight: bold;\n  margin-bottom: 15rpx;\n  text-align: center;\n}\n\n.username:empty {\n  display: none;\n}\n\n.user-stats {\n  display: flex;\n}\n\n.stat-item {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.stat-value {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #ff6b81;\n}\n\n.stat-label {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.mini-badge {\n  position: absolute;\n  top: -5rpx;\n  right: 20rpx;\n  width: 16rpx;\n  height: 16rpx;\n  background-color: #ff4757;\n  border-radius: 50%;\n}\n\n.main-functions {\n  margin-bottom: 20rpx;\n}\n\n.function-card {\n  background-color: #fff;\n  border-radius: 16rpx;\n  padding: 25rpx;\n  margin-bottom: 20rpx;\n}\n\n.function-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 15rpx;\n}\n\n.function-icon {\n  font-size: 40rpx;\n  margin-right: 15rpx;\n}\n\n.function-title {\n  font-size: 30rpx;\n  font-weight: bold;\n}\n\n.function-desc {\n  display: block;\n  font-size: 24rpx;\n  color: #999;\n  margin-bottom: 20rpx;\n}\n\n.function-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 26rpx;\n  color: #ff6b81;\n}\n\n.settings-section {\n  background-color: #fff;\n  border-radius: 16rpx;\n  padding: 0 20rpx;\n}\n\n.section-title {\n  font-size: 26rpx;\n  color: #999;\n  padding: 25rpx 0 15rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n\n.setting-item {\n  display: flex;\n  align-items: center;\n  padding: 25rpx 0;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n\n.setting-icon {\n  font-size: 36rpx;\n  margin-right: 20rpx;\n}\n\n.setting-text {\n  flex: 1;\n  font-size: 28rpx;\n}\n\n.setting-arrow {\n  font-size: 40rpx;\n  color: #999;\n}\n\n.logout-btn {\n  margin: 30rpx 0;\n  background-color: #ff4757;\n  color: #fff;\n  border-radius: 50rpx;\n  font-size: 28rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n}\n</style>","import MiniProgramPage from 'F:/uni-app/Newocg/ocg/pages/personal/personal.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","res"],"mappings":"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"}